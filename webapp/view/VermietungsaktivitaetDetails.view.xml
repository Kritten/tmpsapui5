<core:View
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
	controllerName="ag.bpc.Deka.controller.VermietungsaktivitaetDetails" >

	<Page id="idVermietungsaktivitaetDetails" title="{i18n>VERM_DET_TITLE}" class="sapUiFioriObjectPage" showNavButton="true" navButtonPress="onBack" >

        <headerContent>
			<Button icon="sap-icon://edit" text="{i18n>BEARBEITEN}" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/vermietungsaktivitaet/Editable}) }" press="onBearbeitenButtonPress" />
		</headerContent>

		<content>

            <FlexBox>
                <items>
                    <FlexBox>
                        <items>
                            <ObjectHeader title="{i18n>VERMIETUNGSAKTIVITAET} {form>/vermietungsaktivitaet/VaId}" >
                                <attributes>
                                    <ObjectAttribute title="{i18n>KATEGORIE}" text="{= ${text>/kategorie}[${form>/vermietungsaktivitaet/Kategorie}] }" />
                                    <ObjectAttribute title="{i18n>BUCHUNGSKREIS}" text="{form>/vermietungsaktivitaet/Bukrs}" />
                                    <ObjectAttribute title="{i18n>WIRTSCHAFTSEINHEIT}" text="{form>/vermietungsaktivitaet/WeId}" />
                                    <ObjectAttribute title="{i18n>BEZEICHNUNG}" text="{= ${form>/vermietungsaktivitaet/VaToWe/Plz} + ' ' + ${form>/vermietungsaktivitaet/VaToWe/Ort} + ', ' + ${form>/vermietungsaktivitaet/VaToWe/StrHnum} + (${form>/vermietungsaktivitaet/VaToWe/Bez} ? ', &quot;' + ${form>/vermietungsaktivitaet/VaToWe/Bez} + '&quot;' : '')}" />
                                </attributes>
                            </ObjectHeader>
                        </items>
                        <layoutData>
							<FlexItemData growFactor="1" />
						</layoutData>
                    </FlexBox>

                    <FlexBox justifyContent="End">
                        <items>
                            <List items="{form>/vermietungsaktivitaet/VaToMap}" growing="true" growingThreshold="3" class="sapUiContentPadding" backgroundDesign="Transparent" showSeparators="None" noDataText=" " >
                                <StandardListItem
                                    type="Active"
                                    title="{form>KeId}"
                                    icon="{= ${form>Aktiv} ? 'sap-icon://accept' : 'sap-icon://decline' }"
                                    iconDensityAware="false"
                                    iconInset="false"
                                    press="onMappingPressed">
                                </StandardListItem>
                            </List>
                        </items>
                        <layoutData>
							<FlexItemData growFactor="1" />
						</layoutData>
                    </FlexBox>
                </items>
            </FlexBox>

            <Table id="mietflaechenangabenTable" mode="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') ? 'Delete' : 'None' }" items="{form>/vermietungsaktivitaet/VaToOb}" delete="onMietflaechenAngabenLoeschenButtonPress">

                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>MIETFLAECHENANGABEN}" level="H2"/>
                        <ToolbarSpacer />
                        <Text text="{form>/viewsettings/zeitspanneSelected/Text} | {form>/viewsettings/waehrungSelected/Nach} | {form>/viewsettings/flaecheneinheitSelected/Nach}" />
                        <Button icon="sap-icon://action-settings" press="handleTableSettingsButton" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit')}" />
                        <Button id="idButtonAusbaukostenVerteilen" text="{i18n>VERTEILEN}" icon="sap-icon://overview-chart" iconFirst="false" press="onAusbaukostenVerteilenButtonPress" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                        <Button text="{i18n>KONDITIONENEINIGUNG_HINZUFUEGEN}" icon="sap-icon://sys-add" iconFirst="false" press="onKonditioneneinigungHinzufuegenButtonPress" visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') &amp;&amp; ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) }" />
                        <Button text="{i18n>MIETFLAECHE_HINZUFUEGEN}" icon="sap-icon://sys-add" iconFirst="false" press="onMietflaechenAngabeHinzufuegenButtonPress" visible="{= (${form>/vermietungsaktivitaet/Kategorie} !== '01') &amp;&amp; ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) }" />
                    </Toolbar>
                </headerToolbar>

                <columns>
                    <Column visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01')}" minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>KE_ID}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETFLAECHE}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>BEZEICHNUNG}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>NUTZUNGSART}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <Text text="{i18n>NUTZUNGSART} {i18n>ALTERNATIV}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" visible="{= ${form>/modus} === 'show' }">
                        <Text text="{i18n>NUTZUNGSART} {i18n>ALTERNATIV}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>HAUPTNUTZFLAECHE} / {i18n>STUECK}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETFLAECHE} {i18n>ALTERNATIV}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETFLAECHENSPLIT}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MARKTUEBLICHE_MIETE} in {form>/viewsettings/waehrungSelected/Nach} / {form>/viewsettings/flaecheneinheitSelected/Nach} {i18n>ODER_STUECK}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{= ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) ? '*' : '' }{i18n>ANGEBOTSMIETE} in {form>/viewsettings/waehrungSelected/Nach} / {form>/viewsettings/flaecheneinheitSelected/Nach}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>GRUNDAUSBAUKOSTEN} in {form>/viewsettings/waehrungSelected/Nach} / {form>/viewsettings/flaecheneinheitSelected/Nach}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETERAUSBAUKOSTEN} in {form>/viewsettings/waehrungSelected/Nach} / {form>/viewsettings/flaecheneinheitSelected/Nach}" />
                    </Column>
                </columns>

                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <Text text="{form>KeId}" visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01')}" />
                            <Text text="{form>Bukrs}/{form>WeId}/{form>MoId}" />
                            <Text text="{form>Bezei}" />
                            <Text text="{= ${text>/nutzungsart}[${form>Nutzart}] }" />
                            <Select selectedKey="{form>NutzartAlt}" items="{path: 'form>/nutzungsarten', templateShareable: true}" change="onNutzartAltChange">
                                <items>
                                    <core:Item key="{form>NaId}" text="{form>TextSh}" />
                                </items>
                            </Select>
                            <Text text="{= ${text>/nutzungsart}[${form>NutzartAlt}] }" />
                            <Text text="{ parts:
                                                [
                                                {path: 'form>Hnfl'},
                                                {path: 'form>HnflUnit'},
                                                {path: 'form>/viewsettings/flaecheneinheitSelected/Multiplikator'},
                                                {path: 'form>/viewsettings/flaecheneinheitSelected/Nach'}
                                                ],
                                          formatter: 'myFormatter.formatHnfl'}" />
                            <Input value="{ path: 'form>HnflAlt', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                            <CheckBox selected="{form>MfSplit}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                            <Input value="{ parts:
                                                [
                                                {path: 'form>NhMiete'},
                                                {path: 'form>/viewsettings/waehrungSelected/Multiplikator'}
                                                ],
                                            formatter: 'myFormatter.formatBetrag'}"
                                    editable="false" />
                            <Input value="{ path: 'form>AnMiete', type: 'model.CustomNumberType' }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" type="Float" />
                            <Input value="{ path: 'form>GaKosten', type: 'model.CustomNumberType' }" editable="{= ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) &amp;&amp; (${form>Nutzart} !== '0700') &amp;&amp; (${form>Nutzart} !== '0750') &amp;&amp; (${form>NutzartAlt} !== '0700') &amp;&amp; (${form>NutzartAlt} !== '0750') }" />
                            <Input value="{ path: 'form>MaKosten', type: 'model.CustomNumberType' }" editable="{= ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) &amp;&amp; (${form>Nutzart} !== '0700') &amp;&amp; (${form>Nutzart} !== '0750') &amp;&amp; (${form>NutzartAlt} !== '0700') &amp;&amp; (${form>NutzartAlt} !== '0750') }" />
                        </cells>
                    </ColumnListItem>

                </items>
            </Table>

            <MessageStrip id="idMietflaechenangabenErrorBox" type="Error" class="sapUiSmallMargin" visible="false" />

            <f:SimpleForm
                title="{i18n>GEMEINSAME_ANGABEN}"
                minWidth="1024"
                maxContainerCols="2"
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanL="3"
                labelSpanM="3"
                emptySpanL="0"
                emptySpanM="0"
                columnsL="1"
                columnsM="1" >

                <f:content>

                    <Label text="{i18n>VERMIETUNGSART}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" visible="{= ${form>/modus} === 'show' }" />
                    <Input id="InputVermietungsartShow" value="{= ${text>/vermietungsart}[${form>/vermietungsaktivitaet/Vermietungsart}] }" visible="{= ${form>/modus} === 'show' }" editable="false" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    
                    <Label text="{i18n>VERMIETUNGSART}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" visible="{= ${form>/modus} !== 'show' }" />
                    <Select id="vermietungsart" selectedKey="{form>/vermietungsaktivitaet/Vermietungsart}" items="{form>/vermietungsarten}" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom">
                        <items>
                            <core:Item key="{form>key}" text="{form>text}" />
                        </items>
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Select>

                    <Label text="{i18n>DIENSTLEISTER}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" visible="{= ${form>/vermietungsaktivitaet/Kategorie} === '03' }" />
                    <Input id="idDienstleister" value="{form>/vermietungsaktivitaet/Dienstleister}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" visible="{= ${form>/vermietungsaktivitaet/Kategorie} === '03' }" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    <Button text="{i18n>DIENSTLEISTER_WAEHLEN}" visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '03')  &amp;&amp; ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) }" press="onDienstleisterAuswahlButtonPress">
                        <layoutData>
                            <l:GridData span="L3 M3 S12" />
                        </layoutData>
                    </Button>

                    <Label text="{i18n>DEBITORENNUMMER}" />
                    <Input id="idDebitor" value="{form>/vermietungsaktivitaet/Debitor}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    <Button text="{i18n>DEBITOR_AUSWAEHLEN}" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" press="onDebitorAuswahlButtonPress" >
                        <layoutData>
                            <l:GridData span="L3 M3 S12" />
                        </layoutData>
                    </Button>

                    <Label text="{i18n>MIETERNAME}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idMietername" value="{form>/vermietungsaktivitaet/Debitorname}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>EMBARGO}" />
                    <Input id="idEmbargo" maxLength="14" value="{form>/vermietungsaktivitaet/EmbargoNr}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    <Link text="{i18n>EMBARGO_ABFRAGE}" emphasized="true" target="_blank" href="https://tcmdekap01.dekager.dekabank.intern:23443/smaragd.tcm.webclient/check">
                        <layoutData>
							<l:GridData span="L3 M3 S4" />
						</layoutData>
					</Link>

                    <Label text="{i18n>INTENSIVANALYSE}" visible="{= ${form>/vermietungsaktivitaet/Kategorie} === '01' || ${form>/vermietungsaktivitaet/Kategorie} === '03' }" />
                    <CheckBox id="idIntensivAnalyse" selected="{form>/vermietungsaktivitaet/IntAnalyDone}" visible="{= ${form>/vermietungsaktivitaet/Kategorie} === '01' || ${form>/vermietungsaktivitaet/Kategorie} === '03' }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }"  class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L1 M1 S12" />
						</layoutData>
                    </CheckBox>

                    <Label text="{i18n>MIETBEGINN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <DatePicker id="idMietbeginn" dateValue="{form>/vermietungsaktivitaet/Mietbeginn}" placeholder=" " displayFormat="short" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </DatePicker>

                    <Label text="{i18n>LAUFZEIT_BIS_1ST_BREAK} {i18n>IN_MONATEN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idLzFirstbreak" value="{ path: 'form>/vermietungsaktivitaet/LzFirstbreak', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" >
                        <layoutData>
                            <l:GridData span="L3 M3 S12" />
                        </layoutData>
                    </Input>
                    
                    <Label text="{i18n>VERTRAGSLAUFZEIT} {i18n>IN_MONATEN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idVtrLfz" value="{ path: 'form>/vermietungsaktivitaet/VtrLfzM', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
                            <l:GridData span="L3 M3 S12" />
                        </layoutData>
                    </Input>

                    <Label text="{i18n>VERLAENGERUNGS_OPTION} {i18n>IN_MONATEN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idVerlOpt" value="{ path: 'form>/vermietungsaktivitaet/VerlOptM', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
                            <l:GridData span="L3 M3 S12" />
                        </layoutData>
                    </Input>

                    <Label text="{i18n>ANZAHL_WIEDERHOLUNGEN_VERLAENGUNERGS_OPTION}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idVerlOptWdh" value="{ path: 'form>/vermietungsaktivitaet/VerlOptWdh', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" >
                        <layoutData>
                            <l:GridData span="L3 M3 S12" />
                        </layoutData>
                    </Input>
                    
                    <Label text="{i18n>MIETFREIE_ZEIT} {i18n>IN_MONATEN}" />
                    <Input id="idMzMonate" value="{ path: 'form>/vermietungsaktivitaet/MzMonate', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input> 

                    <Label text="{i18n>ERSTER_MONAT_MIETFREI}" />
                    <DatePicker id="idMzErsterMonat" dateValue="{form>/vermietungsaktivitaet/MzErsterMonat}" placeholder=" " displayFormat="MM/yyyy" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </DatePicker>

                    <Label text="{i18n>ANZAHL_WIEDERHOLUNGEN} {i18n>IN_JAHREN}" />
                    <Input id="idMzAnzahlJ" value="{ path: 'form>/vermietungsaktivitaet/MzAnzahlJ', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>MAKLERNAME}" />
                    <Input value="{ path: 'form>/vermietungsaktivitaet/MaklerName' }" maxLength="60" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    
                    <Label text="{i18n>MAKLERKOSTEN} {i18n>IN_MONATSMIETEN}" />
                    <Input id="idMkMonate" value="{ path: 'form>/vermietungsaktivitaet/MkMonate', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>MAKLERKOSTEN} ({i18n>ABSOLUT}) in {form>/viewsettings/waehrungSelected/Nach}" />
                    <Input id="idMkAbsolut" value="{ path: 'form>/vermietungsaktivitaet/MkAbsolut', type: 'model.CustomNumberType' }"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>BERATUNGSKOSTEN} {i18n>IN_MONATSMIETEN}" />
                    <Input id="idBkMonate" value="{ path: 'form>/vermietungsaktivitaet/BkMonate', type: 'model.CustomNumberType' }"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>BERATUNGSKOSTEN} ({i18n>ABSOLUT}) in {form>/viewsettings/waehrungSelected/Nach}" />
                    <Input id="idBkAbsolut" value="{ path: 'form>/vermietungsaktivitaet/BkAbsolut', type: 'model.CustomNumberType' }"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <!-- Sonstige Kosten -->
                    <Label text="{i18n>SONSTIGE_KOSTEN} in {form>/viewsettings/waehrungSelected/Nach}" visible="{= ${form>/modus} === 'show' }" />
      <!--              <Input id="InputSonstigeKostenShow" value="{= ${text>/kostenart}[${form>/vermietungsaktivitaet/ArtKosten}] }" visible="{= ${form>/modus} === 'show' }" editable="false">-->
      <!--                  <layoutData>-->
						<!--	<l:GridData span="L3 M3 S12" />-->
						<!--</layoutData>-->
      <!--              </Input>-->
                    <Input id="idSonstKShow" value="{ path: 'form>/vermietungsaktivitaet/SonstK', type: 'model.CustomNumberType' }" visible="{= ${form>/modus} === 'show' }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    <!-- REDUNDANT -->
                    <Label text="{i18n>SONSTIGE_KOSTEN} in {form>/viewsettings/waehrungSelected/Nach}" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
      <!--              <Select id="InputSonstigeKostenNewEdit" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" selectedKey="{form>/vermietungsaktivitaet/ArtKosten}" items="{form>/kostenarten}">-->
      <!--                  <items>-->
      <!--                      <core:Item key="{form>KoId}" text="{form>Txtmd}" />-->
      <!--                  </items>-->
      <!--                  <layoutData>-->
						<!--	<l:GridData span="L3 M3 S12" />-->
						<!--</layoutData>-->
      <!--              </Select>-->
                    <Input id="idSonstKNewEdit" value="{ path: 'form>/vermietungsaktivitaet/SonstK', type: 'model.CustomNumberType' }" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    
                    <Label text="{i18n>CASH_INTENSIVES} in {form>/viewsettings/waehrungSelected/Nach}" required="{= ${form>/vermietungsaktivitaet/SonstK} > 0 }" />
                    <Input id="InputCashIntensives" value="{ path: 'form>/vermietungsaktivitaet/Cashinc', type: 'model.CustomNumberType' }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <!-- Sonstige ErtrÃ¤ge  -->
                    <Label text="{i18n>SONSTIGE_ERTRAEGE} ({= ${form>/vermietungsaktivitaet/MonatJahr} ==='M' ? ${i18n>PRO_MONAT} : ${i18n>PRO_JAHR_LANG} }) in {form>/viewsettings/waehrungSelected/Nach}" visible="{= ${form>/modus} === 'show' }" />
                    <Input id="InputSonstigeErtraegeShow" value="{= ${text>/ertragsart}[${form>/vermietungsaktivitaet/ArtErtrag}] }" visible="{= ${form>/modus} === 'show' }" editable="false">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    <Input id="idSonstEShow" value="{ path: 'form>/vermietungsaktivitaet/SonstE', type: 'model.CustomNumberType' }" visible="{= ${form>/modus} === 'show' }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    <!-- REDUNDANT -->
                    <Label text="{i18n>SONSTIGE_ERTRAEGE} ({= ${form>/vermietungsaktivitaet/MonatJahr} ==='M' ? ${i18n>PRO_MONAT} : ${i18n>PRO_JAHR_LANG} }) in {form>/viewsettings/waehrungSelected/Nach}" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Select id="InputSonstigeErtraegeNewEdit" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" selectedKey="{form>/vermietungsaktivitaet/ArtErtrag}" items="{form>/ertragsarten}">
                        <items>
                            <core:Item key="{form>ErId}" text="{form>Txtmd}" />
                        </items>
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Select>
                    <Input id="idSonstENewEdit" value="{ path: 'form>/vermietungsaktivitaet/SonstE', type: 'model.CustomNumberType' }" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>ERSTER_MONAT_VERTEILUNG_AUSBAUKOSTEN}" />
                    <DatePicker id="idAkErsterMonat" dateValue="{form>/vermietungsaktivitaet/AkErsterMonat}" placeholder=" " displayFormat="MM/yyyy" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </DatePicker>

                    <Label text="{i18n>VERTEILUNG_AUSBAUKOSTEN_MONATE}" />
                    <Input id="idAkAnzahlM" value="{ path: 'form>/vermietungsaktivitaet/AkAnzahlM', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>STEUERSCHAEDLING}" />
                    <CheckBox id="idSteuerschlg" selected="{form>/vermietungsaktivitaet/Steuerschlg}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L1 M1 S12" />
						</layoutData>
                    </CheckBox>

                    <Label text="{i18n>KOSTEN_AUS_STEUERSCHADEN} in {form>/viewsettings/waehrungSelected/Nach}" />
                    <Input id="idSteuerschaden" value="{ path: 'form>/vermietungsaktivitaet/Steuerschaden', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>ERTRAG_AUS_MWST} ({= ${form>/vermietungsaktivitaet/MonatJahr} ==='M' ? ${i18n>PRO_MONAT} : ${i18n>PRO_JAHR_LANG} }) in {form>/viewsettings/waehrungSelected/Nach}" />
                    <Input id="idMwstkErtrag" value="{ path: 'form>/vermietungsaktivitaet/MwstkErtrag', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>EINMAL_ERTRAG} in {form>/viewsettings/waehrungSelected/Nach}" />
                    <Input id="einmalertrag" value="{ path: 'form>/vermietungsaktivitaet/Einmalertrag', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>POENALE} in {form>/viewsettings/waehrungSelected/Nach}" />
                    <Input id="idPoenale" value="{ path: 'form>/vermietungsaktivitaet/Poenale', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>INDEXWEITERGABE} {i18n>IN_PROZENT}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idIdxWeitergabe" value="{ path: 'form>/vermietungsaktivitaet/IdxWeitergabe', type: 'model.CustomNumberType'}"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    
                    <Label text="{i18n>UEBLICHE_INDIZIERUNG}" />
                    <CheckBox id="idUeblicheIndizierung" selected="{form>/vermietungsaktivitaet/MauebIndex}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" select="onSelectMauebIndex">
                        <layoutData>
							<l:GridData span="L1 M1 S12" />
						</layoutData>
                    </CheckBox>
                    
                    <Label text="{i18n>MAX_LAUFZEIT_IN_MONATEN}" visible="{= ${form>/vermietungsaktivitaet/MauebIndex} !== true }" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="idMaxLaufzeitInMonaten" value="{ path: 'form>/vermietungsaktivitaet/MaxLfz', type: 'model.CustomNumberType'}" visible="{= ${form>/vermietungsaktivitaet/MauebIndex} !== true }"  editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>
                    
                    <Label text="{i18n>UEBLICHE_MIETSICHERHEIT}" />
                    <CheckBox id="idUeblicheMietsicherheit" selected="{form>/vermietungsaktivitaet/MauebMietsich}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L1 M1 S12" />
						</layoutData>
                    </CheckBox>
                    
                    <Label text="{i18n>MIETSICHERHEIT_ABSOLUT} in {form>/viewsettings/waehrungSelected/Nach}" required="{= ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) &amp;&amp; (${form>/vermietungsaktivitaet/MauebMietsich} !== true) }" />
                    <Input id="idMietsicherheitAbsolut" value="{ path: 'form>/vermietungsaktivitaet/MietsichAbs', type: 'model.CustomNumberType'}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Input>

                    <Label text="{i18n>PLANUNGSRELEVANZ}" />
                    <CheckBox id="idPLRelevant" selected="{form>/vermietungsaktivitaet/PLRelevant}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
                        <layoutData>
							<l:GridData span="L1 M1 S12" />
						</layoutData>
                    </CheckBox>

                    <Label required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" text="{i18n>VERMIETUNGSLEISTUNGSRELEVANZ}" />
					<RadioButtonGroup id="idVmlRel" columns="2" selectedIndex="{form>/vermietungsaktivitaet/VmlRel}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" >
						<buttons>
							<RadioButton id="idVmlRelJa" text="{i18n>JA}"/>
							<RadioButton id="idVmlRelNein" text="{i18n>NEIN}"/>
						</buttons>
					</RadioButtonGroup>
                </f:content>

			</f:SimpleForm>

            <f:SimpleForm
                title="{i18n>SONSTIGE_ANGABEN}"
                minWidth="1024"
                maxContainerCols="2"
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanL="3"
                labelSpanM="3"
                emptySpanL="0"
                emptySpanM="0"
                columnsL="1"
                columnsM="1">

                <f:content>

                    <Label text="{i18n>STATUS}" />
                    <Input value="{= ${text>/status}[${form>/vermietungsaktivitaet/Status}] }" editable="false" visible="{= ${form>/modus} === 'show' }">
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </Input>
                    <Select id="selectStatus" selectedKey="{form>/vermietungsaktivitaet/Status}" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" items="{form>/statuswerte}" change="onStatusSelektionChange" >
                        <items>
                            <core:Item key="{form>Stid}" text="{form>Txtmd}" />
                        </items>
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </Select>

                    <Label text="{i18n>ANMERKUNG}" />
                    <Input value="{= ${text>/anmerkung}[${form>/vermietungsaktivitaet/Anmerkung}] }" editable="false" visible="{= ${form>/modus} === 'show' }">
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </Input>
                    <Select id="idAnmerkung" selectedKey="{form>/vermietungsaktivitaet/Anmerkung}" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" items="{form>/anmerkungen}">
                        <items>
                            <core:Item key="{form>Id}" text="{form>Txtmd}" enabled="{= ${form>Id} !== '81'}" />
                        </items>
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </Select>

                    <Label text="{i18n>BEMERKUNG}" />
                    <TextArea id="idBemerkung" value="{form>/vermietungsaktivitaet/Bemerkung}" growing="true" growingMaxLines="15" rows="4" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" liveChange="onBemerkungLiveChange" maxLength="3000">
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </TextArea>

                </f:content>

			</f:SimpleForm>

            <Table>
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>MIETE_UND_KOSTEN}" level="H2"/>
                    </Toolbar>
                </headerToolbar>

                <columns>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>BEZEICHNUNG}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>LAUFZEIT}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="Right">
                        <Text text="{i18n>VERMIETUNGSAKTIVITAET}" />
                    </Column>
                    <Column visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }" minScreenWidth="Tablet" demandPopin="true" hAlign="Right">
                        <Text text="{i18n>KONDITIONENEINIGUNG}" />
                    </Column>
                    <Column visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }" minScreenWidth="Tablet" demandPopin="true" hAlign="Right">
                        <Text text="{i18n>DIFFERENZ}" />
                    </Column>
                </columns>

                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>MIETE_GESAMT}" />
                            <Text text=" " />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesErtragPa', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesKeErtrag', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }" text="{ parts:
                                                [
                                                {path:'form>/vermietungsaktivitaet/GesErtragPa'},
                                                {path:'form>/vermietungsaktivitaet/GesKeErtrag'},
                                                {path:'form>/viewsettings/waehrungSelected/Nach'}
                                                ],
                                          formatter: 'myFormatter.formatDifferenz'}" />
                            <!--<Text text="{= (Math.round(${form>/vermietungsaktivitaet/GesErtragPa} * 100 - ${form>/vermietungsaktivitaet/GesKeErtrag} * 100) / 100)} {form>/viewsettings/waehrungSelected/Nach}">
                                <customData>
                                    <core:CustomData key="numberstate" value="positive" writeToDom="{= (${form>/vermietungsaktivitaet/GesErtragPa} - ${form>/vermietungsaktivitaet/GesKeErtrag}) &gt;= 0 }" />
                                    <core:CustomData key="numberstate" value="negative" writeToDom="{= (${form>/vermietungsaktivitaet/GesErtragPa} - ${form>/vermietungsaktivitaet/GesKeErtrag}) &lt; 0 }" />
                                </customData>
                            </Text>-->
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>KOSTEN_GESAMT}" />
                            <Text text=" " />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesKosten', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesKeKosten', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }" text="{ parts:
                                                [
                                                {path:'form>/vermietungsaktivitaet/GesKosten'},
                                                {path:'form>/vermietungsaktivitaet/GesKeKosten'},
                                                {path:'form>/viewsettings/waehrungSelected/Nach'}
                                                ],
                                          formatter: 'myFormatter.formatDifferenz'}" />
                            <!--<Text text="{= (Math.round(${form>/vermietungsaktivitaet/GesKosten} * 100 - ${form>/vermietungsaktivitaet/GesKeKosten} * 100) / 100)} {form>/viewsettings/waehrungSelected/Nach}">
                                <customData>
                                    <core:CustomData key="numberstate" value="negative" writeToDom="{= (${form>/vermietungsaktivitaet/GesKosten} - ${form>/vermietungsaktivitaet/GesKeKosten}) &gt; 0 }" />
                                    <core:CustomData key="numberstate" value="positive" writeToDom="{= (${form>/vermietungsaktivitaet/GesKosten} - ${form>/vermietungsaktivitaet/GesKeKosten}) &lt;= 0 }" />
                                </customData>
                            </Text>-->
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem visible = "{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }">
                        <cells>
                            <Text text="{i18n>ERTRAEGE_GESAMT_KE}" />
                            <Text text="{
                                    path: 'form>/vermietungsaktivitaet/LaufzeitKe',
                                    type: 'sap.ui.model.type.Integer',
                                    formatOptions: {
                                        maxIntegerDigits: 5
                                    }
                            }" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesVaErtragLz', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesKeErtragLz', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }" text="{ parts: [
                                                    {path:'form>/vermietungsaktivitaet/GesVaErtragLz'},
                                                    {path:'form>/vermietungsaktivitaet/GesKeErtragLz'},
                                                    {path:'form>/viewsettings/waehrungSelected/Nach'}
                                                ],
                                                formatter: 'myFormatter.formatDifferenz'}" />
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>ERTRAEGE_GESAMT_VA}" />
                            <Text text="{
                                    path: 'form>/vermietungsaktivitaet/LzFirstbreak',
                                    type: 'sap.ui.model.type.Integer',
                                    formatOptions: {
                                        maxIntegerDigits: 5
                                    }
                            }" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/GesErtrag', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach}" />
                            <Text text=" " />
                            <Text visible="{= (${form>/vermietungsaktivitaet/Kategorie} === '01') }" text=" " />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

            <Table>
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>BERECHNETE_KENNZAHLEN}" level="H2"/>
                    </Toolbar>
                </headerToolbar>

                <columns>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>BEZEICHNUNG}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>WERT}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text=" " />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text=" " />
                    </Column>
                </columns>

                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>INCENTIVEQUOTE}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/Incentivequote', type: 'model.CustomNumberType'} %" />
                            <Text text= " " />
                            <Text text= " " />
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>EFFEKTIVMIETE}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/Effektivmiete', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach} / {form>/viewsettings/flaecheneinheitSelected/Nach}" />
                            <Text text=" " />
                            <Text text=" " />
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>EFFEKTIVMIETE_OHNE_GRUNDAUSBAUKOSTEN}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/EffektivmOGabk', type: 'model.CustomNumberType'} {form>/viewsettings/waehrungSelected/Nach} / {form>/viewsettings/flaecheneinheitSelected/Nach}" />
                            <Text text=" " />
                            <Text text=" " />
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>VERHGEMM}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/VerhGeMm', type: 'model.CustomNumberType'} %" />
                            <Text text= " " />
                            <Text text= " " />
                        </cells>
                    </ColumnListItem>
                    <ColumnListItem>
                        <cells>
                            <Text text="{i18n>AMORTISATION}" />
                            <Text text="{ path: 'form>/vermietungsaktivitaet/Amortisation', type: 'model.CustomNumberType'}" />
                            <Text text= " " />
                            <Text text= " " />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
		</content>

        <footer>
			<OverflowToolbar>

                <ToolbarSpacer/>

				<Button icon="{= ${form>/vermietungsaktivitaet/Favorit} ? 'sap-icon://favorite' : 'sap-icon://unfavorite' }"
                        press="onFavoritButtonPress"
                        visible="{= (${form>/modus} === 'show') }" />

                <Button text="{i18n>DRUCKEN}"
                        press="onDruckenButtonPress"
                        visible="{= (${form>/modus} === 'show') }" />

                <Button text="{i18n>VA_DEAKTIVIEREN}"
                        press="onLoeschenButtonPress"
                        type="Reject"
                        visible="{= (${form>/modus} === 'show') &amp;&amp; ${form>/vermietungsaktivitaet/BtnDeak} }" />

                <ToolbarSpacer visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />

                <Button text="{i18n>SPEICHERN}"
                        type="Emphasized"
                        press="onSpeichernButtonPress"
                        visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                    <layoutData><OverflowToolbarLayoutData moveToOverflow="false" /></layoutData>
                </Button>

                <Button text="{i18n>ABBRECHEN}"
                        press="onAbbrechenButtonPress"
                        visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                    <layoutData><OverflowToolbarLayoutData moveToOverflow="false" /></layoutData>
                </Button>

			</OverflowToolbar>
		</footer>

	</Page>

</core:View>