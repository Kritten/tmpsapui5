<mvc:View
    controllerName="ag.bpc.Deka.controller.KonditioneneinigungDetails"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc">
    
	<Page 
        id="idKonditioneneinigungDetails"
        title="{= ((${form>/modus} === 'show') ? ${i18n>KOND_DET_TITLE_SHOW} : false) || ((${form>/modus} === 'edit') ? ${i18n>KOND_DET_TITLE_EDIT} : false) || ((${form>/modus} === 'new') ? ${i18n>KOND_DET_TITLE_NEW} : '') }" 
        class="sapUiFioriObjectPage" 
        showNavButton="true" 
        navButtonPress="onBack">

        <headerContent>
			<Button icon="sap-icon://edit" text="{i18n>BEARBEITEN}" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" press="onBearbeitenButtonPress" />
		</headerContent>

		<content>
                
            <FlexBox>
                <items>
                    <FlexBox>
                        <items>
                            <ObjectHeader title="{i18n>KONDITIONENEINIGUNG} {form>/konditioneneinigung/KeId}">
                                <attributes>
                                    <ObjectAttribute title="{i18n>BUCHUNGSKREIS}" text="{form>/konditioneneinigung/Bukrs}" />
                                    <ObjectAttribute title="{i18n>WIRTSCHAFTSEINHEIT}" text="{form>/konditioneneinigung/WeId}" />
                                    <ObjectAttribute title="{i18n>BEZEICHNUNG}" text="{form>/konditioneneinigung/KeToWe/Plz} {form>/konditioneneinigung/KeToWe/Ort} {form>/konditioneneinigung/KeToWe/StrHnum}" />
                                </attributes>
                            </ObjectHeader>
                        </items>
                        <layoutData>
							<FlexItemData growFactor="1" />
						</layoutData>
                    </FlexBox>
                    
                    <FlexBox justifyContent="End">
                        <items>
                            <List items="{form>/konditioneneinigung/KeToMap}" growing="true" growingThreshold="10" class="sapUiContentPadding" backgroundDesign="Transparent" showSeparators="None" noDataText="" >
                                <StandardListItem 
                                    type="Active"
                                    title="{form>VaId}"
                                    icon="{= ${form>Aktiv} ? './img/iconmonstr-circle-1-active.png' : './img/iconmonstr-circle-1-inactive.png' }" press="onMappingPressed">
                                </StandardListItem>
                            </List>
                        </items>
                        <layoutData>
							<FlexItemData growFactor="1" />
						</layoutData>
                    </FlexBox>
                
                </items>
            </FlexBox>

            <Table id="mietflaechenangabenTable" mode="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') ? 'MultiSelect' : 'None' }" items="{form>/konditioneneinigung/KeToOb}">
                
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>MIETFLAECHENANGABEN}" level="H2"/>
                        <ToolbarSpacer />
                        <Text text="{form>/viewsettings/zeitspanneSelected/text} | {form>/viewsettings/waehrungSelected/text} | {form>/viewsettings/flaecheneinheitSelected/text}" />
                        <Button icon="sap-icon://action-settings" press="handleTableSettingsButton" />
                    </Toolbar>
                </headerToolbar>
                
                <columns>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETFLAECHE}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>BEZEICHNUNG}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>NUTZUNGSART}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>HAUPTNUTZFLAECHE}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETFLAECHE} {i18n>ALTERNATIV}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETFLAECHENSPLIT}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MARKTUEBLICHE_MIETE} in {form>/viewsettings/waehrungSelected/text} / {form>/viewsettings/flaecheneinheitSelected/text}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{= ((${form>/modus} === 'new') || (${form>/modus} === 'edit')) ? '*' : '' }{i18n>ANGEBOTSMIETE} in {form>/viewsettings/waehrungSelected/text} / {form>/viewsettings/flaecheneinheitSelected/text}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>GRUNDAUSBAUKOSTEN} in {form>/viewsettings/waehrungSelected/text} / {form>/viewsettings/flaecheneinheitSelected/text}" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="{i18n>MIETERAUSBAUKOSTEN} in {form>/viewsettings/waehrungSelected/text} / {form>/viewsettings/flaecheneinheitSelected/text}" />
                    </Column>
                </columns>
                
                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <Text text="{form>Bukrs}/{form>WeId}/{form>MoId}" />
                            <Text text="{form>Bezei}" />
                            <Text text="{form>Nutzart}" />
                            <Input value="{form>Hnfl}" editable="false" />
                            <Input value="{form>HnflAlt}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                            <CheckBox selected="{form>MfSplit}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                            <Input value="{form>NhMiete}" editable="false" /> <!-- {= (${form>NhMiete} * ${form>/viewsettings/waehrungSelected/umrechungskurs}).toFixed(2) } -->
                            <Input value="{form>AnMiete}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                            <Input value="{form>GaKosten}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                            <Input value="{form>MaKosten}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                        </cells>
                    </ColumnListItem>
                    
                </items>
            </Table>

            <MessageStrip id="mietflaechenangabenErrorBox" type="Error" class="sapUiSmallMargin" visible="false" />
                
            <FlexBox class="sapUiSmallMargin" visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
            
                <items>
                    <FlexBox>
                        <items>
                            <Button text="{i18n>MIETFLAECHE_HINZUFUEGEN}" icon="sap-icon://sys-add" press="onMietflaechenAngabeHinzufuegenButtonPress" class="sapUiSmallMarginEnd" />
                            <Button text="{i18n>MIETFLAECHE_ENTFERNEN}" icon="sap-icon://sys-minus" press="onMietflaechenAngabenLoeschenButtonPress" />
                        </items>
                        <layoutData>
							<FlexItemData growFactor="1" />
						</layoutData>
                    </FlexBox>
                    
                    <FlexBox justifyContent="End">
                        <items>
                            <Button id="idButtonAusbaukostenVerteilen" text="{i18n>VERTEILEN}" icon="sap-icon://overview-chart" press="onAusbaukostenVerteilenButtonPress" />
                        </items>
                        <layoutData>
							<FlexItemData growFactor="1" />
						</layoutData>
                    </FlexBox>
                
                </items>
            </FlexBox>
                    
            <f:SimpleForm
                title="{i18n>GEMEINSAME_ANGABEN}"
                minWidth="1024"
                maxContainerCols="2"
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanL="3"
                labelSpanM="3"
                emptySpanL="0"
                emptySpanM="0"
                columnsL="1"
                columnsM="1" >

                <f:content>
                    <!-- <core:Title text="" /> -->
                    
                    <Label text="{i18n>GUELTIGKEIT_KONDITIONENEINIGUNG}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <DatePicker id="dateGueltigkeitKonditioneneinigung" dateValue="{form>/konditioneneinigung/GueltigkKe}" placeholder=" " displayFormat="short" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />

                    <Label text="{i18n>MIETBEGINN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <DatePicker id="dateMietbeginn" dateValue="{form>/konditioneneinigung/Mietbeginn}" placeholder=" " displayFormat="short" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    
                    <Label text="{i18n>LAUFZEIT_BIS_1ST_BREAK} {i18n>IN_MONATEN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="laufzeitBis1stBreak" value="{form>/konditioneneinigung/LzFirstbreak}" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    

                    <!-- <core:Title text="" /> -->
                    
                    <Label text="{i18n>MIETFREIE_ZEIT} {i18n>IN_MONATEN}" required="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    <Input id="mietfreieZeitenInMonaten" value="{form>/konditioneneinigung/MzMonate}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" />
                    

                    <Label text="{i18n>MAKLERKOSTEN} {i18n>IN_MONATSMIETEN}"  />
                    <Input id="maklerkostenInMonatsmieten" value="{form>/konditioneneinigung/MkMonate}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    
                    <Label text="{i18n>MAKLERKOSTEN} ({i18n>ABSOLUT}) in {form>/viewsettings/waehrungSelected/text}"  />
                    <Input id="maklerkostenAbsolut" value="{form>/konditioneneinigung/MkAbsolut}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" />


                    <Label text="{i18n>BERATUNGSKOSTEN} {i18n>IN_MONATSMIETEN}"  />
                    <Input id="beratungskostenInMonatsmieten" value="{form>/konditioneneinigung/BkMonatsmieten}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />

                    <Label text="{i18n>BERATUNGSKOSTEN} ({i18n>ABSOLUT}) in {form>/viewsettings/waehrungSelected/text}"  />
                    <Input id="beratungskostenAbsolut" value="{form>/konditioneneinigung/BkAbsolut}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom" />

                    <!-- Sonstige Kosten -->
                    <Label text="{i18n>SONSTIGE_KOSTEN} in {form>/viewsettings/waehrungSelected/text}" />
                    <Select enabled="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" selectedKey="{form>/konditioneneinigung/ArtKosten}">
                        <items>
                            <core:Item key="00" text="Sonstige Kostenart 00" />
                            <core:Item key="01" text="Sonstige Kostenart 01" />
                            <core:Item key="02" text="Sonstige Kostenart 02" />
                        </items>
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Select>
                    <Input id="idSonstK" value="{form>/konditioneneinigung/SonstK}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }">
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </Input>

                    <!-- Sonstige Erträge  -->
                    <Label text="{i18n>SONSTIGE_ERTRAEGE} in {form>/viewsettings/waehrungSelected/text}" />
                    <Select enabled="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" selectedKey="{form>/konditioneneinigung/ArtErtrag}">
                        <items>
                            <core:Item key="00" text="Sonstige Ertragsart 00" />
                            <core:Item key="01" text="Sonstige Ertragsart 01" />
                            <core:Item key="02" text="Sonstige Ertragsart 02" />
                        </items>
                        <layoutData>
							<l:GridData span="L3 M3 S12" />
						</layoutData>
                    </Select>
                    <Input id="idSonstE" value="{form>/konditioneneinigung/SonstE}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" class="sapUiSmallMarginBottom">
                        <layoutData>
							<l:GridData span="L6 M6 S12" />
						</layoutData>
                    </Input>


                    <Label text="{i18n>KOSTEN_AUS_STEUERSCHADEN} in {form>/viewsettings/waehrungSelected/text}" />
                    <Input id="idSteuerschaden" value="{form>/konditioneneinigung/Steuerschaden}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />

                    <Label text="{i18n>ERTRAG_AUS_MWST} in {form>/viewsettings/waehrungSelected/text}" />
                    <Input id="idMwstkErtrag" value="{form>/konditioneneinigung/MwstkErtrag}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    
                    <Label text="{i18n>EINMAL_ERTRAG} in {form>/viewsettings/waehrungSelected/text}" />
                    <Input id="einmalertrag" value="{form>/konditioneneinigung/Einmalertrag}" type="Number" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />

                </f:content>

			</f:SimpleForm>

            <f:SimpleForm
                title="{i18n>SONSTIGE_ANGABEN}"
                minWidth="1024"
                maxContainerCols="2"
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanL="3"
                labelSpanM="3"
                emptySpanL="0"
                emptySpanM="0"
                columnsL="1"
                columnsM="1" >

                <f:content>
                    <!-- <core:Title text="" /> -->
                    
                    <Label text="{i18n>STATUS}" />
                    <Select width="100%" enabled="false" selectedKey="{form>/konditioneneinigung/Status}" items="{form>/statuswerte}" >
                        <items>
                            <core:Item key="{form>key}" text="{form>text}" />
                        </items>
                    </Select>
                    
                    <Label text="{i18n>ANMERKUNG}" />
                    <Select width="100%" enabled="false" selectedKey="{form>/konditioneneinigung/Anmerkung}" items="{form>/anmerkungen}" >
                        <items>
                            <core:Item key="{form>key}" text="{form>text}" />
                        </items>
                    </Select>

                    <Label text="{i18n>BEMERKUNG}" />
                    <TextArea value="{form>/konditioneneinigung/Bemerkung}" rows="4" editable="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                    
                    <Label text="{i18n>BUDGET_STOPP}" />
					<CheckBox id="budgetStopp" text="" selected="{form>/konditioneneinigung/BudgetStopp}" editable="false">
                        <layoutData>
							<l:GridData span="L1 M1 S12" />
						</layoutData>
                    </CheckBox>

                </f:content>

			</f:SimpleForm>

            <Table>
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>MIETE_UND_KOSTEN}" level="H2"/>
                    </Toolbar>
                </headerToolbar>
                
                <columns>
                    <Column minScreenWidth="Tablet" demandPopin="true">
                        <Text text="Bezeichnung" />
                    </Column>
                    <Column minScreenWidth="Tablet" demandPopin="true" hAlign="Right">
                        <Text text="Konditioneneinigung" />
                    </Column>
                </columns>
                
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="Miete gesamt" />
                            <Text text="{form>/konditioneneinigung/mieteGesamt/konditioneneinigung}" />
                        </cells>
                    </ColumnListItem>
                    
                    <ColumnListItem>
                        <cells>
                            <Text text="Kosten gesamt" />
                            <Text text="{form>/konditioneneinigung/kostenGesamt/konditioneneinigung}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

		</content>
        
        <footer>
			<OverflowToolbar>
				<Button text="{= ${form>/konditioneneinigung/Favorit} ? ${i18n>FAVORIT_ENTFERNEN} : ${i18n>FAVORIT_HINZUFUEGEN} }" icon="{= ${form>/konditioneneinigung/Favorit} ? 'sap-icon://favorite' : 'sap-icon://unfavorite' }" press="onFavoritButtonPress" visible="{= (${form>/modus} === 'show') }" />
				<Button text="{i18n>ZUR_GENEHMIGUNG_VORLEGEN}" icon="sap-icon://request" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" />
				<Button text="{i18n>GENEHMIGEN}" icon="sap-icon://accept" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" />
				<Button text="{i18n>NICHTGENEHMIGEN}" icon="sap-icon://decline" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" />
				<Button text="{i18n>REAKTIVIEREN}" icon="sap-icon://repost" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" />
                <Button text="{i18n>GENEHMIGUNG_ZURUECKZIEHEN}" icon="sap-icon://undo" press="onGenehmigungZurueckziehenButtonPress" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" />
                <Button text="{i18n>DRUCKEN}" icon="sap-icon://print" visible="{= (${form>/modus} === 'show') }" press="onDruckenButtonPress" />
                <!-- <Button text="{i18n>GUELTIGKEIT_VERLAENGERN}" icon="sap-icon://fob-watch" press="onGueltigkeitVerlaengernButtonPress" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" /> -->
                <!-- <Button text="{i18n>LOESCHEN}" icon="sap-icon://delete" press="onLoeschenButtonPress" visible="{= (${form>/modus} === 'show') &amp;&amp; (${form>/konditioneneinigung/Editable}) }" /> -->
                <ToolbarSpacer visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" />
                <Button visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" text="{i18n>SPEICHERN}" icon="sap-icon://accept" type="Accept" press="onSpeichernButtonPress" >
                    <layoutData><OverflowToolbarLayoutData moveToOverflow="false" /></layoutData>
                </Button>
                <Button visible="{= (${form>/modus} === 'new') || (${form>/modus} === 'edit') }" text="{i18n>ABBRECHEN}" icon="sap-icon://decline" type="Reject" press="onAbbrechenButtonPress" >
                    <layoutData><OverflowToolbarLayoutData moveToOverflow="false" /></layoutData>
                </Button>
			</OverflowToolbar>
		</footer>

        
	</Page>
            
</mvc:View>

